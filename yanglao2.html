<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…»è€æ•™è‚²è´¢åŠ¡è§„åˆ’è®¡ç®—å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; touch-action: manipulation; }
        .wx-input { -webkit-appearance: none; appearance: none; }
        .number-font { font-family: 'Courier New', monospace; font-weight: bold; }
        
        /* æ­¥éª¤æŒ‡ç¤ºå™¨ */
        .step-dot { transition: all 0.3s ease; }
        .step-active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); transform: scale(1.2); }
        .step-completed { background: #10b981; }
        
        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page-enter { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-primary:active { transform: scale(0.98); }
        
        .btn-secondary {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-bar { transition: width 0.5s ease; }
        
        /* ç»“æœå¡ç‰‡ */
        .result-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        
        /* é˜²æ­¢å¾®ä¿¡å­—ä½“è°ƒæ•´ */
        body { -webkit-text-size-adjust: 100% !important; }
        input, select, button { font-size: 16px; }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒåŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen pb-24">

    <!-- é¡¶éƒ¨è¿›åº¦æŒ‡ç¤º -->
    <div class="bg-white shadow-sm sticky top-0 z-50 px-4 py-3">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <div class="flex items-center space-x-2 flex-1">
                <div class="step-dot w-3 h-3 rounded-full bg-gray-300 step-active" id="dot-1"></div>
                <div class="flex-1 h-1 bg-gray-200 rounded-full overflow-hidden">
                    <div class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-500" id="progress-1" style="width: 0%"></div>
                </div>
                <div class="step-dot w-3 h-3 rounded-full bg-gray-300" id="dot-2"></div>
                <div class="flex-1 h-1 bg-gray-200 rounded-full overflow-hidden">
                    <div class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-500" id="progress-2" style="width: 0%"></div>
                </div>
                <div class="step-dot w-3 h-3 rounded-full bg-gray-300" id="dot-3"></div>
                <div class="flex-1 h-1 bg-gray-200 rounded-full overflow-hidden">
                    <div class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-500" id="progress-3" style="width: 0%"></div>
                </div>
                <div class="step-dot w-3 h-3 rounded-full bg-gray-300" id="dot-4"></div>
                <div class="flex-1 h-1 bg-gray-200 rounded-full overflow-hidden">
                    <div class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-500" id="progress-4" style="width: 0%"></div>
                </div>
                <div class="step-dot w-3 h-3 rounded-full bg-gray-300" id="dot-5"></div>
            </div>
        </div>
        <div class="text-center mt-2 text-xs text-gray-500">
            <span id="step-text">æ­¥éª¤ 1/5ï¼šåŸºç¡€ä¿¡æ¯</span>
        </div>
    </div>

    <!-- é¡µé¢å†…å®¹å®¹å™¨ -->
    <div class="max-w-md mx-auto px-4 py-6">

        <!-- ç¬¬1æ­¥ï¼šåŸºç¡€ä¿¡æ¯ -->
        <div id="page-1" class="page-enter space-y-4">
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">1</span>
                    ä¸ªäººä¿¡æ¯
                </h2>
                
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å½“å‰å¹´é¾„ <span class="text-blue-600 font-bold text-lg" id="val-currentAge">30</span> å²</label>
                        <input type="range" id="currentAge" min="22" max="55" value="30" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('currentAge', 'val-currentAge')">
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span>22å²</span>
                            <span>55å²</span>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é€€ä¼‘å¹´é¾„ <span class="text-blue-600 font-bold text-lg" id="val-retireAge">60</span> å²</label>
                        <input type="range" id="retireAge" min="50" max="70" value="60" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('retireAge', 'val-retireAge')">
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span>50å²</span>
                            <span>70å²</span>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é¢„æœŸå¯¿å‘½ <span class="text-blue-600 font-bold text-lg" id="val-lifeExp">85</span> å²</label>
                        <input type="range" id="lifeExpectancy" min="70" max="100" value="85" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('lifeExpectancy', 'val-lifeExp')">
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span>70å²</span>
                            <span>100å²</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-green-100 text-green-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">2</span>
                    å®¶åº­çŠ¶å†µ
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å­å¥³æ•°é‡</label>
                        <select id="childCount" class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 bg-white" onchange="toggleChild()">
                            <option value="0">æ— å­å¥³</option>
                            <option value="1" selected>1ä¸ªå­©å­</option>
                            <option value="2">2ä¸ªå­©å­</option>
                        </select>
                    </div>

                    <div id="child1-box" class="bg-gray-50 rounded-xl p-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">å­©å­1å¹´é¾„ <span class="text-green-600 font-bold" id="val-child1">5</span> å²</label>
                        <input type="range" id="childAge1" min="0" max="20" value="5" 
                            class="wx-input w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('childAge1', 'val-child1')">
                    </div>

                    <div id="child2-box" class="bg-gray-50 rounded-xl p-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">å­©å­2å¹´é¾„ <span class="text-green-600 font-bold" id="val-child2">3</span> å²</label>
                        <input type="range" id="childAge2" min="0" max="20" value="3" 
                            class="wx-input w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('childAge2', 'val-child2')">
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-purple-100 text-purple-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">3</span>
                    ç»æµå‡è®¾
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å¹´é€šèƒ€ç‡ <span class="text-purple-600 font-bold" id="val-inflation">3</span>%</label>
                        <input type="range" id="inflation" min="1" max="8" step="0.5" value="3" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('inflation', 'val-inflation')">
                        <p class="text-xs text-gray-500 mt-1">å»ºè®®2-4%ï¼Œè¿‘å¹´CPIå‡å€¼çº¦2-3%</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æŠ•èµ„æ”¶ç›Šç‡ <span class="text-purple-600 font-bold" id="val-return">5</span>%</label>
                        <input type="range" id="investReturn" min="2" max="10" step="0.5" value="5" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('investReturn', 'val-return')">
                        <p class="text-xs text-gray-500 mt-1">ä¿å®ˆ3-4%ï¼Œç¨³å¥5-6%ï¼Œæ¿€è¿›7%+</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ç°æœ‰å‚¨è“„ (ä¸‡å…ƒ)</label>
                        <input type="number" id="savings" value="20" step="5" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 text-lg">
                    </div>
                </div>
            </div>

            <!-- ä¸‹ä¸€æ­¥æŒ‰é’® -->
            <button onclick="nextStep(1)" class="btn-primary w-full text-white font-bold py-4 rounded-2xl text-lg transition-transform active:scale-95 shadow-lg">
                ä¸‹ä¸€æ­¥ â†’
            </button>
        </div>

        <!-- ç¬¬2æ­¥ï¼šç¤¾ä¿ -->
        <div id="page-2" class="hidden space-y-4">
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-red-100 text-red-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">4</span>
                    ç¤¾ä¿ç¼´çº³ç­–ç•¥
                </h2>
                
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å½“åœ°å¹³å‡å·¥èµ„ (å…ƒ/æœˆ)</label>
                        <input type="number" id="avgSalary" value="8000" step="500" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 text-lg">
                        <p class="text-xs text-gray-500 mt-1">å½±å“ç¼´è´¹åŸºæ•°ä¸Šä¸‹é™</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ç¼´è´¹æ¡£æ¬¡ <span class="text-red-600 font-bold text-lg" id="val-level">100</span>%</label>
                        <input type="range" id="pensionLevel" min="60" max="300" step="10" value="100" 
                            class="wx-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" 
                            oninput="updateSlider('pensionLevel', 'val-level'); calcPensionPreview()">
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span>60%(æœ€ä½)</span>
                            <span>300%(æœ€é«˜)</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">å·²ç¼´å¹´é™</label>
                            <input type="number" id="paidYears" value="5" min="0" max="40" 
                                class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 text-center text-lg" onchange="calcPensionPreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ç»§ç»­ç¼´çº³</label>
                            <input type="number" id="futureYears" value="20" min="0" max="35" 
                                class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 text-center text-lg" onchange="calcPensionPreview()">
                        </div>
                    </div>
                </div>
            </div>

            <!-- é¢„è§ˆç»“æœ -->
            <div class="bg-gradient-to-br from-red-500 to-pink-600 rounded-2xl shadow-lg p-5 text-white">
                <h3 class="font-bold mb-3 text-lg">ç¤¾ä¿å…»è€é‡‘é¢„ä¼°</h3>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-sm opacity-90">é€€ä¼‘é¦–æœˆå…»è€é‡‘</span>
                    <span class="text-2xl font-bold number-font">Â¥<span id="preview-pension">0</span></span>
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="opacity-75">æœˆç¼´è´¹é‡‘é¢</span>
                    <span class="font-bold">Â¥<span id="preview-pay">0</span></span>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="prevStep(2)" class="btn-secondary flex-1 font-bold py-4 rounded-2xl text-lg transition-colors">
                    â† ä¸Šä¸€æ­¥
                </button>
                <button onclick="nextStep(2)" class="btn-primary flex-1 text-white font-bold py-4 rounded-2xl text-lg transition-transform active:scale-95 shadow-lg">
                    ä¸‹ä¸€æ­¥ â†’
                </button>
            </div>
        </div>

        <!-- ç¬¬3æ­¥ï¼šæ•™è‚² -->
        <div id="page-3" class="hidden space-y-4">
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-green-100 text-green-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">5</span>
                    æ•™è‚²é‡‘è§„åˆ’
                </h2>
                
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å½“å‰å¹´æ•™è‚²æ”¯å‡º (ä¸‡å…ƒ/å¹´/å­©)</label>
                        <input type="number" id="eduCost" value="3" step="0.5" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 text-lg" onchange="calcEduPreview()">
                        <p class="text-xs text-gray-500 mt-1">å«å­¦è´¹ã€å…´è¶£ç­ã€ç”Ÿæ´»è´¹</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å¤§å­¦å¹´è´¹ç”¨é¢„ä¼° (ä¸‡å…ƒ/å¹´)</label>
                        <input type="number" id="collegeCost" value="4" step="0.5" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 text-lg" onchange="calcEduPreview()">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ˜¯å¦ç•™å­¦</label>
                        <select id="studyAbroad" class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 bg-white" onchange="toggleAbroad(); calcEduPreview()">
                            <option value="0">å¦</option>
                            <option value="4">æœ¬ç§‘ç•™å­¦(4å¹´)</option>
                            <option value="2">ç ”ç©¶ç”Ÿç•™å­¦(2å¹´)</option>
                        </select>
                    </div>

                    <div id="abroad-box" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ç•™å­¦å¹´è´¹ç”¨ (ä¸‡å…ƒ/å¹´)</label>
                        <input type="number" id="abroadCost" value="30" step="5" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 text-lg" onchange="calcEduPreview()">
                    </div>
                </div>
            </div>

            <!-- é¢„è§ˆç»“æœ -->
            <div class="bg-gradient-to-br from-green-500 to-teal-600 rounded-2xl shadow-lg p-5 text-white">
                <h3 class="font-bold mb-3 text-lg">æ•™è‚²é‡‘æ€»éœ€æ±‚</h3>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-sm opacity-90">æ€»ç°å€¼(å«é€šèƒ€)</span>
                    <span class="text-2xl font-bold number-font">Â¥<span id="preview-edu">0</span>ä¸‡</span>
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="opacity-75">æ¯æœˆéœ€å®šæŠ•</span>
                    <span class="font-bold">Â¥<span id="preview-eduMonthly">0</span></span>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="prevStep(3)" class="btn-secondary flex-1 font-bold py-4 rounded-2xl text-lg transition-colors">
                    â† ä¸Šä¸€æ­¥
                </button>
                <button onclick="nextStep(3)" class="btn-primary flex-1 text-white font-bold py-4 rounded-2xl text-lg transition-transform active:scale-95 shadow-lg">
                    ä¸‹ä¸€æ­¥ â†’
                </button>
            </div>
        </div>

        <!-- ç¬¬4æ­¥ï¼šå…»è€ -->
        <div id="page-4" class="hidden space-y-4">
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="bg-orange-100 text-orange-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">6</span>
                    é€€ä¼‘ç”Ÿæ´»è§„åˆ’
                </h2>
                
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å½“å‰æœˆç”Ÿæ´»è´¹ (å…ƒ)</label>
                        <input type="number" id="livingCost" value="8000" step="500" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 text-lg" onchange="calcRetirePreview()">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é€€ä¼‘ç”Ÿæ´»è´¨é‡</label>
                        <select id="retireQuality" class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 bg-white" onchange="calcRetirePreview()">
                            <option value="0.7">ç®€æœ´ (å½“å‰70%)</option>
                            <option value="0.8" selected>èˆ’é€‚ (å½“å‰80%)</option>
                            <option value="1.0">ç»´æŒç°çŠ¶ (100%)</option>
                            <option value="1.2">å“è´¨ç”Ÿæ´» (120%)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">åŒ»ç–—å¤‡ç”¨é‡‘ (ä¸‡å…ƒ)</label>
                        <input type="number" id="medical" value="30" step="5" 
                            class="wx-input w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 text-lg" onchange="calcRetirePreview()">
                        <p class="text-xs text-gray-500 mt-1">åº”å¯¹å¤§ç—…åŒ»ç–—æ”¯å‡º</p>
                    </div>
                </div>
            </div>

            <!-- é¢„è§ˆç»“æœ -->
            <div class="bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg p-5 text-white">
                <h3 class="font-bold mb-3 text-lg">å…»è€é‡‘ç¼ºå£é¢„è§ˆ</h3>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-sm opacity-90">èµ„é‡‘ç¼ºå£</span>
                    <span class="text-2xl font-bold number-font text-yellow-200">Â¥<span id="preview-gap">0</span>ä¸‡</span>
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="opacity-75">æ¯æœˆéœ€é¢å¤–å‚¨è“„</span>
                    <span class="font-bold">Â¥<span id="preview-retireMonthly">0</span></span>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="prevStep(4)" class="btn-secondary flex-1 font-bold py-4 rounded-2xl text-lg transition-colors">
                    â† ä¸Šä¸€æ­¥
                </button>
                <button onclick="showReport()" class="btn-primary flex-1 text-white font-bold py-4 rounded-2xl text-lg transition-transform active:scale-95 shadow-lg flex items-center justify-center">
                    <span>æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š</span>
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>
        </div>

        <!-- ç¬¬5æ­¥ï¼šæŠ¥å‘Šé¡µ -->
        <div id="page-5" class="hidden space-y-4">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ“Š è´¢åŠ¡è§„åˆ’æŠ¥å‘Š</h2>
                <p class="text-gray-500 text-sm mt-1">åŸºäºæ‚¨çš„è¾“å…¥ç”Ÿæˆçš„å®Œæ•´åˆ†æ</p>
            </div>

            <!-- æ€»è§ˆå¡ç‰‡ -->
            <div class="grid grid-cols-2 gap-3">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center shadow-lg">
                    <p class="text-xs opacity-90 mb-1">æ€»èµ„é‡‘éœ€æ±‚</p>
                    <p class="text-2xl font-bold number-font">Â¥<span id="rep-total">0</span>ä¸‡</p>
                </div>
                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center shadow-lg">
                    <p class="text-xs opacity-90 mb-1">èµ„é‡‘ç¼ºå£</p>
                    <p class="text-2xl font-bold number-font">Â¥<span id="rep-gap">0</span>ä¸‡</p>
                </div>
            </div>

            <!-- æ”¶å…¥è¦æ±‚ -->
            <div class="bg-white rounded-2xl shadow-lg p-5 text-center">
                <h3 class="text-gray-600 text-sm mb-2">å»ºè®®å®¶åº­æœˆæ”¶å…¥</h3>
                <p class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 number-font mb-1">
                    Â¥<span id="rep-income">0</span>
                </p>
                <p class="text-xs text-gray-400">å«ç”Ÿæ´»æ”¯å‡º+å‚¨è“„+ç¤¾ä¿</p>
            </div>

            <!-- è¯¦ç»†åˆ†è§£ -->
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h3 class="font-bold text-gray-800 mb-4">èµ„é‡‘æ„æˆæ˜ç»†</h3>
                
                <div class="space-y-4">
                    <div class="flex items-center">
                        <div class="w-24 text-sm text-gray-600">æ•™è‚²é‡‘</div>
                        <div class="flex-1 mx-3">
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div id="bar-edu" class="h-full bg-green-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="w-20 text-right text-sm font-bold text-gray-800">Â¥<span id="txt-edu">0</span>ä¸‡</div>
                    </div>
                    
                    <div class="flex items-center">
                        <div class="w-24 text-sm text-gray-600">å…»è€é‡‘</div>
                        <div class="flex-1 mx-3">
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div id="bar-retire" class="h-full bg-orange-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="w-20 text-right text-sm font-bold text-gray-800">Â¥<span id="txt-retire">0</span>ä¸‡</div>
                    </div>

                    <div class="flex items-center">
                        <div class="w-24 text-sm text-gray-600">ç¤¾ä¿è¦†ç›–</div>
                        <div class="flex-1 mx-3">
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div id="bar-social" class="h-full bg-red-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="w-20 text-right text-sm font-bold text-gray-800">Â¥<span id="txt-social">0</span>ä¸‡</div>
                    </div>

                    <div class="flex items-center">
                        <div class="w-24 text-sm text-gray-600">ç°æœ‰å‚¨è“„</div>
                        <div class="flex-1 mx-3">
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div id="bar-savings" class="h-full bg-blue-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="w-20 text-right text-sm font-bold text-gray-800">Â¥<span id="txt-savings">0</span>ä¸‡</div>
                    </div>
                </div>
            </div>

            <!-- æœˆåº¦æ”¯å‡ºç»“æ„ -->
            <div class="bg-white rounded-2xl shadow-lg p-5">
                <h3 class="font-bold text-gray-800 mb-4">æœˆåº¦æ”¯å‡ºç»“æ„</h3>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="bg-gray-50 rounded-xl p-3">
                        <p class="text-xs text-gray-500 mb-1">ç”Ÿæ´»æ”¯å‡º</p>
                        <p class="text-lg font-bold text-gray-800">Â¥<span id="rep-living">0</span></p>
                    </div>
                    <div class="bg-green-50 rounded-xl p-3">
                        <p class="text-xs text-gray-500 mb-1">æ•™è‚²å®šæŠ•</p>
                        <p class="text-lg font-bold text-green-600">Â¥<span id="rep-eduMonthly">0</span></p>
                    </div>
                    <div class="bg-orange-50 rounded-xl p-3">
                        <p class="text-xs text-gray-500 mb-1">å…»è€å‚¨è“„</p>
                        <p class="text-lg font-bold text-orange-600">Â¥<span id="rep-retireMonthly">0</span></p>
                    </div>
                    <div class="bg-red-50 rounded-xl p-3">
                        <p class="text-xs text-gray-500 mb-1">ç¤¾ä¿ç¼´è´¹</p>
                        <p class="text-lg font-bold text-red-600">Â¥<span id="rep-social">0</span></p>
                    </div>
                </div>
            </div>

            <!-- ç­–ç•¥å»ºè®® -->
            <div class="bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-2xl p-5">
                <h3 class="font-bold text-indigo-800 mb-3 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"></path></svg>
                    ç†è´¢ç­–ç•¥å»ºè®®
                </h3>
                <div id="rep-tips" class="text-sm text-gray-700 space-y-2 leading-relaxed">
                    è®¡ç®—ä¸­...
                </div>
            </div>

            <!-- åˆ†äº«æŒ‰é’® -->
            <button onclick="shareResult()" class="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold py-4 rounded-2xl text-lg shadow-lg active:scale-95 transition-transform flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
                åˆ†äº«è®¡ç®—ç»“æœ
            </button>

            <!-- é‡æ–°å¼€å§‹æŒ‰é’® -->
            <button onclick="resetAll()" class="w-full bg-white border-2 border-gray-300 text-gray-600 font-bold py-4 rounded-2xl text-lg hover:bg-gray-50 transition-colors flex items-center justify-center mt-4">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                é‡æ–°å¡«å…¥æ•°æ®è®¡ç®—
            </button>

            <p class="text-center text-xs text-gray-400 mt-4 pb-4">
                æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå®é™…è¯·ä»¥ç¤¾ä¿å±€åŠé‡‘èæœºæ„ä¸ºå‡†
            </p>
        </div>

    </div>

    <script>
        // å…¨å±€æ•°æ®å­˜å‚¨
        let userData = {
            currentAge: 30, retireAge: 60, lifeExpectancy: 85,
            childCount: 1, childAge1: 5, childAge2: 3,
            inflation: 3, investReturn: 5, savings: 20,
            avgSalary: 8000, pensionLevel: 100, paidYears: 5, futureYears: 20,
            eduCost: 3, collegeCost: 4, studyAbroad: 0, abroadCost: 30,
            livingCost: 8000, retireQuality: 0.8, medical: 30
        };

        // è®¡ç®—ç»“æœå­˜å‚¨
        let calcResults = {
            pension: null,
            edu: null,
            retire: null
        };

        // æ­¥éª¤æ ‡é¢˜
        const stepTitles = ['åŸºç¡€ä¿¡æ¯', 'ç¤¾ä¿ç¼´çº³', 'æ•™è‚²è§„åˆ’', 'å…»è€è§„åˆ’', 'å®Œæ•´æŠ¥å‘Š'];

        function updateSlider(id, valId) {
            const val = document.getElementById(id).value;
            document.getElementById(valId).textContent = val;
            userData[id] = parseFloat(val);
        }

        function toggleChild() {
            const count = parseInt(document.getElementById('childCount').value);
            document.getElementById('child2-box').classList.toggle('hidden', count < 2);
            userData.childCount = count;
        }

        function toggleAbroad() {
            const val = document.getElementById('studyAbroad').value;
            document.getElementById('abroad-box').classList.toggle('hidden', val === '0');
            userData.studyAbroad = parseInt(val);
        }

        // æ­¥éª¤åˆ‡æ¢
        function nextStep(current) {
            // ä¿å­˜å½“å‰é¡µæ•°æ®
            savePageData(current);
            
            // æ›´æ–°è¿›åº¦æ¡
            document.getElementById(`dot-${current}`).classList.remove('step-active');
            document.getElementById(`dot-${current}`).classList.add('step-completed');
            document.getElementById(`progress-${current}`).style.width = '100%';
            
            // éšè—å½“å‰é¡µï¼Œæ˜¾ç¤ºä¸‹ä¸€é¡µ
            document.getElementById(`page-${current}`).classList.add('hidden');
            document.getElementById(`page-${current + 1}`).classList.remove('hidden');
            document.getElementById(`page-${current + 1}`).classList.add('page-enter');
            
            // æ›´æ–°æŒ‡ç¤ºå™¨
            document.getElementById(`dot-${current + 1}`).classList.add('step-active');
            
            // æ›´æ–°æ­¥éª¤æ ‡é¢˜
            updateStepText(current + 1);
            
            // å¦‚æœæ˜¯ç¤¾ä¿é¡µï¼Œè®¡ç®—é¢„è§ˆ
            if (current === 1) {
                setTimeout(calcPensionPreview, 100);
            }
            if (current === 2) {
                setTimeout(calcEduPreview, 100);
            }
            if (current === 3) {
                setTimeout(calcRetirePreview, 100);
            }
        }

        function prevStep(current) {
            // éšè—å½“å‰é¡µï¼Œæ˜¾ç¤ºä¸Šä¸€é¡µ
            document.getElementById(`page-${current}`).classList.add('hidden');
            document.getElementById(`page-${current - 1}`).classList.remove('hidden');
            document.getElementById(`page-${current - 1}`).classList.add('page-enter');
            
            // æ›´æ–°æŒ‡ç¤ºå™¨
            document.getElementById(`dot-${current}`).classList.remove('step-active');
            document.getElementById(`dot-${current - 1}`).classList.remove('step-completed');
            document.getElementById(`dot-${current - 1}`).classList.add('step-active');
            document.getElementById(`progress-${current - 1}`).style.width = '0%';
            
            // æ›´æ–°æ­¥éª¤æ ‡é¢˜
            updateStepText(current - 1);
        }

        function updateStepText(step) {
            document.getElementById('step-text').textContent = `æ­¥éª¤ ${step}/5ï¼š${stepTitles[step - 1]}`;
        }

        function savePageData(page) {
            if (page === 1) {
                userData.currentAge = parseInt(document.getElementById('currentAge').value);
                userData.retireAge = parseInt(document.getElementById('retireAge').value);
                userData.lifeExpectancy = parseInt(document.getElementById('lifeExpectancy').value);
                userData.childCount = parseInt(document.getElementById('childCount').value);
                userData.childAge1 = parseInt(document.getElementById('childAge1').value);
                userData.childAge2 = parseInt(document.getElementById('childAge2').value);
                userData.inflation = parseFloat(document.getElementById('inflation').value);
                userData.investReturn = parseFloat(document.getElementById('investReturn').value);
                userData.savings = parseFloat(document.getElementById('savings').value);
            } else if (page === 2) {
                userData.avgSalary = parseFloat(document.getElementById('avgSalary').value);
                userData.pensionLevel = parseInt(document.getElementById('pensionLevel').value);
                userData.paidYears = parseInt(document.getElementById('paidYears').value);
                userData.futureYears = parseInt(document.getElementById('futureYears').value);
            } else if (page === 3) {
                userData.eduCost = parseFloat(document.getElementById('eduCost').value);
                userData.collegeCost = parseFloat(document.getElementById('collegeCost').value);
                userData.studyAbroad = parseInt(document.getElementById('studyAbroad').value);
                userData.abroadCost = parseFloat(document.getElementById('abroadCost').value || 30);
            } else if (page === 4) {
                userData.livingCost = parseFloat(document.getElementById('livingCost').value);
                userData.retireQuality = parseFloat(document.getElementById('retireQuality').value);
                userData.medical = parseFloat(document.getElementById('medical').value);
            }
        }

        // è®¡ç®—å‡½æ•°
        function calcPension() {
            const { avgSalary, pensionLevel, paidYears, futureYears, retireAge, currentAge, inflation } = userData;
            const totalYears = paidYears + futureYears;
            const base = avgSalary * (pensionLevel / 100);
            const monthlyPay = base * 0.28;
            const personal = base * 0.08;
            
            let balance = personal * 12 * paidYears;
            for (let i = 0; i < futureYears; i++) {
                balance = balance * 1.035 + personal * 12;
            }
            
            const months = Math.max(139, (retireAge - 60) * 12 + 139);
            const personalPension = balance / months;
            const basicPension = avgSalary * (1 + pensionLevel/100) / 2 * totalYears * 0.01;
            const total = personalPension + basicPension;
            const realPension = total / Math.pow(1 + inflation/100, retireAge - currentAge);
            
            return { monthly: realPension, pay: monthlyPay, totalYears, personal: personalPension, basic: basicPension };
        }

        function calcPensionPreview() {
            savePageData(2);
            const result = calcPension();
            document.getElementById('preview-pension').textContent = Math.round(result.monthly).toLocaleString();
            document.getElementById('preview-pay').textContent = Math.round(result.pay).toLocaleString();
            calcResults.pension = result;
        }

        function calcEdu() {
            const { childCount, childAge1, childAge2, eduCost, collegeCost, inflation, investReturn, studyAbroad, abroadCost } = userData;
            
            function calcChild(age) {
                let total = 0;
                const toCollege = 18 - age;
                const toGrad = 22 - age;
                
                for (let i = 0; i < toCollege; i++) {
                    total += eduCost * Math.pow(1 + inflation/100, i);
                }
                for (let i = toCollege; i < toGrad; i++) {
                    let c = collegeCost * Math.pow(1 + inflation/100, i);
                    if (studyAbroad === 4 && i < toCollege + 4) c = abroadCost * Math.pow(1 + inflation/100, i);
                    if (studyAbroad === 2 && i >= toCollege + 2) c = abroadCost * Math.pow(1 + inflation/100, i);
                    total += c;
                }
                return { total, years: toGrad };
            }
            
            const c1 = calcChild(childAge1);
            let total = c1.total;
            if (childCount >= 2) {
                const c2 = calcChild(childAge2);
                total += c2.total;
            }
            
            const maxYears = Math.max(c1.years, childCount >= 2 ? (22 - childAge2) : 0);
            const monthly = pmt(investReturn/100/12, maxYears*12, 0, total*10000) / 10000;
            
            return { total, monthly: monthly * 10000, maxYears };
        }

        function calcEduPreview() {
            savePageData(3);
            const result = calcEdu();
            document.getElementById('preview-edu').textContent = result.total.toFixed(1);
            document.getElementById('preview-eduMonthly').textContent = Math.round(result.monthly).toLocaleString();
            calcResults.edu = result;
        }

        function calcRetire() {
            const { currentAge, retireAge, lifeExpectancy, livingCost, retireQuality, medical, inflation, investReturn } = userData;
            const pensionMonthly = calcResults.pension?.monthly || calcPension().monthly;
            
            const yearsToRetire = retireAge - currentAge;
            const retireYears = lifeExpectancy - retireAge;
            
            const futureLiving = livingCost * retireQuality * Math.pow(1 + inflation/100, yearsToRetire);
            const livingNeed = futureLiving * 12 * retireYears * Math.pow(1 + inflation/100, retireYears/2) / 10000;
            const totalNeed = livingNeed + medical;
            const pensionCover = pensionMonthly * 12 * retireYears / 10000;
            const gap = Math.max(0, totalNeed - pensionCover);
            
            const monthlySave = pmt(investReturn/100/12, yearsToRetire*12, 0, gap*10000) / 10000;
            
            return { totalNeed, pensionCover, gap, monthly: monthlySave * 10000, livingNeed };
        }

        function calcRetirePreview() {
            savePageData(4);
            const result = calcRetire();
            document.getElementById('preview-gap').textContent = result.gap.toFixed(1);
            document.getElementById('preview-retireMonthly').textContent = Math.round(result.monthly).toLocaleString();
            calcResults.retire = result;
        }

        function showReport() {
            // ä¿å­˜ç¬¬4é¡µæ•°æ®
            savePageData(4);
            
            // å®Œæˆæ‰€æœ‰æ­¥éª¤çš„UIæ›´æ–°
            document.getElementById('dot-4').classList.remove('step-active');
            document.getElementById('dot-4').classList.add('step-completed');
            document.getElementById('progress-4').style.width = '100%';
            document.getElementById('dot-5').classList.add('step-active');
            updateStepText(5);
            
            // éšè—ç¬¬4é¡µï¼Œæ˜¾ç¤ºæŠ¥å‘Šé¡µ
            document.getElementById('page-4').classList.add('hidden');
            document.getElementById('page-5').classList.remove('hidden');
            document.getElementById('page-5').classList.add('page-enter');
            
            // ç”ŸæˆæŠ¥å‘Š
            setTimeout(generateReport, 100);
        }

        function generateReport() {
            // ç¡®ä¿æ‰€æœ‰è®¡ç®—å®Œæˆ
            if (!calcResults.pension) calcResults.pension = calcPension();
            if (!calcResults.edu) calcResults.edu = calcEdu();
            if (!calcResults.retire) calcResults.retire = calcRetire();
            
            const { pension, edu, retire } = calcResults;
            const { savings, livingCost, childCount } = userData;
            
            const totalNeed = edu.total + retire.totalNeed;
            const netGap = Math.max(0, totalNeed - savings - retire.pensionCover);
            const totalMonthly = livingCost + edu.monthly + retire.monthly + pension.pay;
            const requiredIncome = totalMonthly * 1.3;
            
            // å¡«å……æ•°æ®
            document.getElementById('rep-total').textContent = totalNeed.toFixed(1);
            document.getElementById('rep-gap').textContent = netGap.toFixed(1);
            document.getElementById('rep-income').textContent = Math.round(requiredIncome).toLocaleString();
            
            document.getElementById('txt-edu').textContent = edu.total.toFixed(1);
            document.getElementById('txt-retire').textContent = retire.totalNeed.toFixed(1);
            document.getElementById('txt-social').textContent = retire.pensionCover.toFixed(1);
            document.getElementById('txt-savings').textContent = savings.toFixed(1);
            
            // è¿›åº¦æ¡
            const maxVal = Math.max(edu.total, retire.totalNeed, retire.pensionCover, savings, 1);
            document.getElementById('bar-edu').style.width = (edu.total/maxVal*100) + '%';
            document.getElementById('bar-retire').style.width = (retire.totalNeed/maxVal*100) + '%';
            document.getElementById('bar-social').style.width = (retire.pensionCover/maxVal*100) + '%';
            document.getElementById('bar-savings').style.width = (savings/maxVal*100) + '%';
            
            // æœˆåº¦ç»“æ„
            document.getElementById('rep-living').textContent = Math.round(livingCost).toLocaleString();
            document.getElementById('rep-eduMonthly').textContent = Math.round(edu.monthly).toLocaleString();
            document.getElementById('rep-retireMonthly').textContent = Math.round(retire.monthly).toLocaleString();
            document.getElementById('rep-social').textContent = Math.round(pension.pay).toLocaleString();
            
            // å»ºè®®
            const years = userData.retireAge - userData.currentAge;
            let tips = '';
            if (netGap <= 0) {
                tips = `<p class="text-green-600 font-bold mb-2">ğŸ‰ æ­å–œï¼æ‚¨çš„è´¢åŠ¡çŠ¶å†µéå¸¸å¥åº·</p>
                       <p>â€¢ å½“å‰å‚¨å¤‡è¶³ä»¥è¦†ç›–æœªæ¥æ•™è‚²å’Œå…»è€éœ€æ±‚</p>
                       <p>â€¢ å»ºè®®ä¿æŒç°æœ‰å‚¨è“„ç‡ï¼Œå¯è€ƒè™‘é…ç½®å•†ä¸šåŒ»ç–—ä¿é™©</p>
                       <p>â€¢ å‰©ä½™èµ„é‡‘å¯é€‚åº¦å¢åŠ æƒç›Šç±»èµ„äº§é…ç½®</p>`;
            } else if (years > 20) {
                tips = `<p class="text-blue-600 font-bold mb-2">â° é•¿æœŸè§„åˆ’ (${years}å¹´å‡†å¤‡æœŸ)</p>
                       <p>â€¢ é‡‡ç”¨"å®šæŠ•+å¤åˆ©"ç­–ç•¥ï¼Œæ¯æœˆå®šæŠ•<b>Â¥${Math.round(edu.monthly + retire.monthly)}</b>å…ƒ</p>
                       <p>â€¢ å»ºè®®é…ç½®æŒ‡æ•°åŸºé‡‘ç»„åˆï¼Œåˆ©ç”¨æ—¶é—´å¹³æ»‘æ³¢åŠ¨</p>
                       <p>â€¢ ç¤¾ä¿ç»´æŒ100%-150%æ¡£æ¬¡ï¼Œç¡®ä¿åŸºç¡€ä¿éšœ</p>
                       <p>â€¢ å»ºç«‹6ä¸ªæœˆæ”¯å‡ºçš„åº”æ€¥åŸºé‡‘åï¼Œå‰©ä½™èµ„é‡‘æŠ•å…¥æƒç›Šç±»èµ„äº§</p>`;
            } else if (years > 10) {
                tips = `<p class="text-orange-600 font-bold mb-2">âš¡ ä¸­æœŸå†²åˆº (${years}å¹´å‡†å¤‡æœŸ)</p>
                       <p>â€¢ æé«˜æœˆå‚¨è“„ç‡è‡³æ”¶å…¥çš„25-30%</p>
                       <p>â€¢ è€ƒè™‘å»¶é•¿å·¥ä½œå¹´é™è‡³65å²ï¼Œå‡å°‘èµ„é‡‘ç¼ºå£</p>
                       <p>â€¢ ç¤¾ä¿æé«˜è‡³200%æ¡£æ¬¡ï¼Œæœ€å¤§åŒ–åŸºç¡€å…»è€é‡‘</p>
                       <p>â€¢ é€‚å½“é™ä½æŠ•èµ„é£é™©ï¼Œç¡®ä¿æœ¬é‡‘å®‰å…¨</p>`;
            } else {
                tips = `<p class="text-red-600 font-bold mb-2">ğŸš¨ ç´§æ€¥è§„åˆ’ (${years}å¹´å‡†å¤‡æœŸ)</p>
                       <p>â€¢ ç«‹å³å‰Šå‡éå¿…è¦æ”¯å‡ºï¼Œå‚¨è“„ç‡éœ€è¾¾35%ä»¥ä¸Š</p>
                       <p>â€¢ å¼ºçƒˆå»ºè®®å»¶é•¿å·¥ä½œå¹´é™æˆ–è€ƒè™‘å…¼èŒæ”¶å…¥</p>
                       <p>â€¢ ç¤¾ä¿æŒ‰æœ€é«˜æ¡£(300%)ç¼´çº³ï¼Œæœ€å¤§åŒ–å…»è€é‡‘</p>
                       <p>â€¢ è€ƒè™‘èµ„äº§å˜ç°æˆ–å­å¥³æ•™è‚²é‡‘è´·æ¬¾æ–¹æ¡ˆ</p>`;
            }
            document.getElementById('rep-tips').innerHTML = tips;
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // é‡æ–°å¼€å§‹
        function resetAll() {
            // é‡ç½®æ‰€æœ‰æ•°æ®
            userData = {
                currentAge: 30, retireAge: 60, lifeExpectancy: 85,
                childCount: 1, childAge1: 5, childAge2: 3,
                inflation: 3, investReturn: 5, savings: 20,
                avgSalary: 8000, pensionLevel: 100, paidYears: 5, futureYears: 20,
                eduCost: 3, collegeCost: 4, studyAbroad: 0, abroadCost: 30,
                livingCost: 8000, retireQuality: 0.8, medical: 30
            };
            calcResults = { pension: null, edu: null, retire: null };
            
            // é‡ç½®UIåˆ°ç¬¬1é¡µ
            document.getElementById('page-5').classList.add('hidden');
            document.getElementById('page-1').classList.remove('hidden');
            document.getElementById('page-1').classList.add('page-enter');
            
            // é‡ç½®è¿›åº¦æ¡
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`dot-${i}`).classList.remove('step-active', 'step-completed');
                if (i === 1) {
                    document.getElementById(`dot-${i}`).classList.add('step-active');
                } else {
                    document.getElementById(`dot-${i}`).classList.add('bg-gray-300');
                }
                if (i <= 4) {
                    document.getElementById(`progress-${i}`).style.width = '0%';
                }
            }
            updateStepText(1);
            
            // é‡ç½®è¡¨å•å€¼
            document.getElementById('currentAge').value = 30;
            document.getElementById('retireAge').value = 60;
            document.getElementById('lifeExpectancy').value = 85;
            document.getElementById('childCount').value = 1;
            document.getElementById('childAge1').value = 5;
            document.getElementById('childAge2').value = 3;
            document.getElementById('inflation').value = 3;
            document.getElementById('investReturn').value = 5;
            document.getElementById('savings').value = 20;
            document.getElementById('avgSalary').value = 8000;
            document.getElementById('pensionLevel').value = 100;
            document.getElementById('paidYears').value = 5;
            document.getElementById('futureYears').value = 20;
            document.getElementById('eduCost').value = 3;
            document.getElementById('collegeCost').value = 4;
            document.getElementById('studyAbroad').value = 0;
            document.getElementById('abroadCost').value = 30;
            document.getElementById('livingCost').value = 8000;
            document.getElementById('retireQuality').value = 0.8;
            document.getElementById('medical').value = 30;
            
            // æ›´æ–°æ˜¾ç¤º
            updateSlider('currentAge', 'val-currentAge');
            updateSlider('retireAge', 'val-retireAge');
            updateSlider('lifeExpectancy', 'val-lifeExp');
            updateSlider('childAge1', 'val-child1');
            updateSlider('childAge2', 'val-child2');
            updateSlider('inflation', 'val-inflation');
            updateSlider('investReturn', 'val-return');
            updateSlider('pensionLevel', 'val-level');
            
            toggleChild();
            toggleAbroad();
            
            // é‡ç½®é¢„è§ˆ
            document.getElementById('preview-pension').textContent = '0';
            document.getElementById('preview-pay').textContent = '0';
            document.getElementById('preview-edu').textContent = '0';
            document.getElementById('preview-eduMonthly').textContent = '0';
            document.getElementById('preview-gap').textContent = '0';
            document.getElementById('preview-retireMonthly').textContent = '0';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆ†äº«
        function shareResult() {
            const text = `ã€å…»è€æ•™è‚²è´¢åŠ¡è§„åˆ’æŠ¥å‘Šã€‘\n` +
                        `æ€»èµ„é‡‘éœ€æ±‚ï¼šÂ¥${document.getElementById('rep-total').textContent}ä¸‡\n` +
                        `èµ„é‡‘ç¼ºå£ï¼šÂ¥${document.getElementById('rep-gap').textContent}ä¸‡\n` +
                        `å»ºè®®æœˆæ”¶å…¥ï¼šÂ¥${document.getElementById('rep-income').textContent}\n\n` +
                        `å¿«æ¥æµ‹ç®—ä½ çš„é€€ä¼‘è§„åˆ’å§ï¼`;
            
            if (navigator.share) {
                navigator.share({ title: 'å…»è€æ•™è‚²è´¢åŠ¡è§„åˆ’', text: text, url: window.location.href });
            } else {
                const input = document.createElement('textarea');
                input.value = text;
                document.body.appendChild(input);
                input.select();
                document.execCommand('copy');
                document.body.removeChild(input);
                alert('æŠ¥å‘Šå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }
        }

        // è´¢åŠ¡å‡½æ•°
        function pmt(rate, nper, pv, fv) {
            if (rate === 0) return -(pv + fv) / nper;
            const pvif = Math.pow(1 + rate, nper);
            return -rate * (pv * pvif + fv) / (pvif - 1);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateStepText(1);
        });
    </script>
</body>
</html>